<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>{{ thread.title }} - {{ board_name }}</title>
    <style>
        body { margin: 0; padding: 0; font-family: "Helvetica Neue", "Hiragino Sans GB", "Microsoft YaHei", "\9ED1\4F53", Arial, sans-serif; background-color: #e9e9e9; }
        #page-post { max-width: 980px; margin: 15px auto; }
        .breadcrumb-trail { padding: 15px 20px; font-size: 14px; color: #666; background-color: #fff; border-radius: 4px 4px 0 0; border-bottom: 1px solid #e7e7e7;}
        .breadcrumb-trail a { color: #005a9c; text-decoration: none; }
        .post-body { background: #fff; padding: 0 10px 10px; border-radius: 0 0 4px 4px; }
        header { padding: 20px; border-bottom: 1px solid #e7e7e7; }
        header h3 { margin: 0; font-size: 24px; font-weight: normal; }
        .card-list { padding-top: 10px; }
        .post-card { display: flex; border: 1px solid #e7e7e7; margin-bottom: 10px; background-color: #fcfcfc; }
        .post-owner { width: 150px; text-align: center; padding: 20px 10px; border-right: 1px solid #e7e7e7; background: #f7f7f7; font-size: 12px; }
        .post-owner .portrait { width: 80px; height: 80px; border-radius: 50%; }
        .post-owner .username { font-weight: bold; font-size: 14px; margin: 10px 0; }
        .post-owner .username a { text-decoration: none; color: #005a9c; }
        .post-main { flex: 1; padding: 15px 20px; position: relative; }
        .floor-number { position: absolute; top: 15px; right: 20px; font-size: 14px; color: #999; }
        .content { font-size: 16px; line-height: 1.5; color: #333; min-height: 150px; }
        .content .body { word-wrap: break-word; }
        .content .blockquote { border-left: 3px solid #ccc; padding-left: 1em; margin: 1em 0; color: #666; }
        .content img { max-width: 100%; height: auto; }
        .content .body p { margin: 0.5em 0; }
        .operations { margin-top: 20px; padding-top: 15px; border-top: 1px solid #e7e7e7; font-size: 12px; color: #999; }
        .attachments { margin-top: 1em; padding-top: 1em; border-top: 1px dashed #ccc; }
        .attachments ul { list-style: none; padding: 0; }
        .attachments li { margin-bottom: 0.5em; }
        .attachments img { border: 1px solid #ddd; margin-top: 5px; }
    </style>
</head>
<body>
<div id="page-post">
    <div class="breadcrumb-trail">
        <a href="../index.html">返回主索引</a> &gt; <a href="../years/index_{{ thread.posts[0].post_time.split('-')[0] }}.html">{{ thread.posts[0].post_time.split('-')[0] }}年</a> &gt; {{ thread.title }}
    </div>
    <div class="post-body">
        <header>
            <h3>{{ thread.title }}</h3>
            <a href="{{ thread.url }}" target="_blank" style="font-size: 14px; margin-top: 10px; display: inline-block;">查看BBS原帖</a>
        </header>

        <div class="card-list">
            {% for post in thread.posts %}
            <div class="post-card">
                <div class="post-owner">
                    <p class="username"><a href="#">{{ post.author }}</a></p>
                </div>
                <div class="post-main">
                    <span class="floor-number">{{ post.floor }}</span>
                    <div class="content">
                        {% for q in post.quotes %}
                        <div class="blockquote">
                            <strong>{{ q.user }} said:</strong><br>
                            {{ q.text }}
                        </div>
                        {% endfor %}
                        <div class="body">{{ post.content|safe }}</div>
                        {% if post.attachments %}
                        <div class="attachments">
                            <strong>附件:</strong>
                            <ul>
                            {% for attachment in post.attachments %}
                                <li>
                                    {% if attachment.exists %}
                                        {% if attachment.is_image %}
                                            <a href="{{ attachment.local_path }}" target="_blank">
                                                <img src="{{ attachment.local_path }}" alt="{{ attachment.filename }}">
                                            </a>
                                        {% else %}
                                            <a href="{{ attachment.local_path }}" target="_blank">{{ attachment.filename }}</a>
                                        {% endif %}
                                    {% else %}
                                        <a href="{{ attachment.url }}" target="_blank">{{ attachment.filename }}</a> <span style="color: #888;">(附件未下载)</span>
                                    {% endif %}
                                </li>
                            {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                    </div>
                    <div class="operations">
                        <div class="right">
                            <span>发表于: {{ post.post_time }}</span>
                            {% if post.edit_time != 'N/A' %}
                            <span> | 修改于: {{ post.edit_time }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
</body>
</html>
